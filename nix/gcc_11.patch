From c0ba4f26b8cb3fea2f21ed9de9d24c700585b584 Mon Sep 17 00:00:00 2001
From: Tobias Mayer <tobim@fastmail.fm>
Date: Wed, 30 Jun 2021 17:40:31 +0200
Subject: [PATCH] Fixes for GCC 11

---
 libvast/test/parseable.cpp           | 2 +-
 libvast/vast/system/disk_monitor.hpp | 1 +
 libvast_test/vast/test/test.hpp      | 1 +
 3 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/libvast/test/parseable.cpp b/libvast/test/parseable.cpp
index 134d9cfac0..079b51b917 100644
--- a/libvast/test/parseable.cpp
+++ b/libvast/test/parseable.cpp
@@ -497,7 +497,7 @@ TEST(unsigned integral) {
 TEST(unsigned hexadecimal integral) {
   using namespace parsers;
   auto p = ignore(-hex_prefix) >> hex64;
-  unsigned x;
+  unsigned x = 0u;
   CHECK(p("1234", x));
   CHECK_EQUAL(x, 0x1234u);
   CHECK(p("13BFC3d1", x));
diff --git a/libvast/vast/system/disk_monitor.hpp b/libvast/vast/system/disk_monitor.hpp
index 361594eada..d09f983395 100644
--- a/libvast/vast/system/disk_monitor.hpp
+++ b/libvast/vast/system/disk_monitor.hpp
@@ -15,6 +15,7 @@
 #include <caf/typed_event_based_actor.hpp>
 
 #include <filesystem>
+#include <optional>
 
 namespace vast::system {
 
diff --git a/libvast_test/vast/test/test.hpp b/libvast_test/vast/test/test.hpp
index c50b9bf30d..042ad727b6 100644
--- a/libvast_test/vast/test/test.hpp
+++ b/libvast_test/vast/test/test.hpp
@@ -14,6 +14,7 @@
 
 #include <caf/test/unit_test.hpp>
 
+#include <optional>
 #include <set>
 #include <string>
 
